<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aula 16 - API REST | Desenvolvimento Web - UNINOVE</title>
    <link rel="stylesheet" href="css/slides.css">
</head>
<body>
    <div class="presentation">

        <!-- SLIDE 1: Capa -->
        <div class="slide slide-cover active">
            <h1>Desenvolvimento Web</h1>
            <h2>Aula 16 ‚Äî API REST com ASP.NET Core</h2>
            <p>Web API, Endpoints, Swagger e Consumo</p>
            <p style="margin-top: 30px; font-size: 0.9em; color: rgba(255,255,255,0.5);">2026.1 ‚Äî 120 minutos</p>
        </div>

        <!-- SLIDE 2: Recapitula√ß√£o -->
        <div class="slide slide-content">
            <div class="slide-header"><h2>Recapitula√ß√£o ‚Äî Aula 15</h2></div>
            <div class="slide-body">
                <div class="recap-container">
                    <h3>O que vimos na aula passada</h3>
                    <ul class="recap-items">
                        <li class="recap-item"><strong>Autentica√ß√£o:</strong> "Quem √© voc√™?" ‚Äî verificar identidade (login/senha)</li>
                        <li class="recap-item"><strong>Autoriza√ß√£o:</strong> "O que voc√™ pode fazer?" ‚Äî verificar permiss√µes</li>
                        <li class="recap-item"><strong>BCrypt:</strong> Hashing irrevers√≠vel para armazenar senhas com seguran√ßa</li>
                        <li class="recap-item"><strong>[Authorize]:</strong> Atributo que protege Controllers e Actions</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- SLIDE 3: Agenda -->
        <div class="slide slide-content">
            <div class="slide-header"><h2>Agenda</h2></div>
            <div class="slide-body">
                <ul class="agenda-list">
                    <li>O que √© uma API REST?</li>
                    <li>Verbos HTTP e Endpoints</li>
                    <li>MVC Controller vs. API Controller</li>
                    <li>Mini Quiz</li>
                    <li>Criando uma Web API</li>
                    <li>Status Codes HTTP</li>
                    <li>Swagger / OpenAPI</li>
                    <li>Caso de Uso Real: Uber</li>
                    <li>Exerc√≠cio Guiado: API de Produtos</li>
                </ul>
            </div>
        </div>

        <!-- SLIDE 4: O que √© API REST -->
        <div class="slide slide-content">
            <div class="slide-header"><h2>O que √© uma API REST?</h2></div>
            <div class="slide-body">
                <p><strong>API</strong> (Application Programming Interface) √© uma interface que permite que diferentes sistemas se comuniquem. <strong>REST</strong> usa o protocolo HTTP para essa comunica√ß√£o.</p>
                <div class="analogy-box" style="margin-top: 15px;">
                    <span class="analogy-icon">üçΩÔ∏è</span>
                    <div class="analogy-text">
                        <h4>Analogia: Restaurante</h4>
                        <p>A API √© como o <strong>gar√ßom</strong>: voc√™ (cliente/app) faz um pedido, o gar√ßom (API) leva at√© a cozinha (servidor/banco) e traz a resposta. Voc√™ n√£o precisa saber como a cozinha funciona!</p>
                    </div>
                </div>
                <div class="diagram-flow" style="margin-top: 15px; justify-content: center;">
                    <div class="diagram-box" style="min-width: 120px;">
                        <span class="box-label">App Mobile</span>
                        <span class="box-desc">Cliente</span>
                    </div>
                    <span class="diagram-arrow">‚Üí</span>
                    <div class="diagram-box highlight" style="min-width: 120px;">
                        <span class="box-label">API REST</span>
                        <span class="box-desc">JSON via HTTP</span>
                    </div>
                    <span class="diagram-arrow">‚Üí</span>
                    <div class="diagram-box highlight-coral" style="min-width: 120px;">
                        <span class="box-label">Servidor</span>
                        <span class="box-desc">Banco de Dados</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- SLIDE 5: Verbos HTTP -->
        <div class="slide slide-content">
            <div class="slide-header"><h2>Verbos HTTP e Endpoints</h2></div>
            <div class="slide-body">
                <table>
                    <thead><tr><th>Verbo HTTP</th><th>Opera√ß√£o</th><th>Endpoint</th><th>Corpo?</th></tr></thead>
                    <tbody>
                        <tr><td><strong style="color:#2ecc71;">GET</strong></td><td>Listar todos</td><td><span class="inline-code">/api/produtos</span></td><td>N√£o</td></tr>
                        <tr><td><strong style="color:#2ecc71;">GET</strong></td><td>Buscar por ID</td><td><span class="inline-code">/api/produtos/5</span></td><td>N√£o</td></tr>
                        <tr><td><strong style="color:#3498db;">POST</strong></td><td>Criar novo</td><td><span class="inline-code">/api/produtos</span></td><td>Sim (JSON)</td></tr>
                        <tr><td><strong style="color:#f39c12;">PUT</strong></td><td>Atualizar</td><td><span class="inline-code">/api/produtos/5</span></td><td>Sim (JSON)</td></tr>
                        <tr><td><strong style="color:#e74c3c;">DELETE</strong></td><td>Excluir</td><td><span class="inline-code">/api/produtos/5</span></td><td>N√£o</td></tr>
                    </tbody>
                </table>
                <div class="box-info" style="margin-top: 10px;">
                    <p>A mesma URL (<span class="inline-code">/api/produtos</span>) responde de forma diferente dependendo do <strong>verbo HTTP</strong> usado.</p>
                </div>
            </div>
        </div>

        <!-- SLIDE 6: MVC vs API -->
        <div class="slide slide-content">
            <div class="slide-header"><h2>MVC Controller vs. API Controller</h2></div>
            <div class="slide-body">
                <table>
                    <thead><tr><th>MVC Controller</th><th>API Controller</th></tr></thead>
                    <tbody>
                        <tr><td>Herda de <span class="inline-code">Controller</span></td><td>Herda de <span class="inline-code">ControllerBase</span></td></tr>
                        <tr><td>Retorna <strong>Views</strong> (HTML)</td><td>Retorna <strong>dados</strong> (JSON)</td></tr>
                        <tr><td>Usado por navegadores</td><td>Usado por apps, SPAs, outros sistemas</td></tr>
                        <tr><td>Rotas: <span class="inline-code">/Produto/Index</span></td><td>Rotas: <span class="inline-code">/api/produtos</span></td></tr>
                        <tr><td>Atributo: nenhum especial</td><td>Atributo: <span class="inline-code">[ApiController]</span></td></tr>
                    </tbody>
                </table>
                <div class="box-info" style="margin-top: 10px;">
                    <p>Os dois podem coexistir no mesmo projeto! O MVC serve as p√°ginas e a API serve os dados.</p>
                </div>
            </div>
        </div>

        <!-- SLIDE 7: Mini Quiz (meio) -->
        <div class="slide slide-content">
            <div class="slide-header"><h2>Mini Quiz</h2></div>
            <div class="slide-body" style="justify-content: center;">
                <div class="quiz-container" data-answer="b">
                    <h3>Vamos verificar!</h3>
                    <p class="quiz-question">Qual verbo HTTP √© usado para <strong>criar</strong> um novo recurso em uma API REST?</p>
                    <ul class="quiz-options">
                        <li><button class="quiz-option" data-option="a">a) GET</button></li>
                        <li><button class="quiz-option" data-option="b">b) POST</button></li>
                        <li><button class="quiz-option" data-option="c">c) PUT</button></li>
                        <li><button class="quiz-option" data-option="d">d) DELETE</button></li>
                    </ul>
                    <div class="quiz-feedback">A resposta correta √© <strong>(b)</strong>. O verbo <strong>POST</strong> √© usado para criar novos recursos. GET l√™, PUT atualiza e DELETE exclui.</div>
                </div>
            </div>
        </div>

        <!-- SLIDE 8: API Controller c√≥digo -->
        <div class="slide slide-content">
            <div class="slide-header"><h2>Criando o API Controller</h2></div>
            <div class="slide-body">
                <pre>
[<span class="type">Route</span>(<span class="js-string">"api/[controller]"</span>)]
[<span class="type">ApiController</span>]
<span class="keyword">public class</span> <span class="type">ProdutosApiController</span> : <span class="type">ControllerBase</span>
{
    <span class="keyword">private readonly</span> <span class="type">AppDbContext</span> _context;

    <span class="keyword">public</span> <span class="js-func">ProdutosApiController</span>(<span class="type">AppDbContext</span> <span class="js-var">context</span>)
    {
        _context = <span class="js-var">context</span>;
    }

    <span class="comment">// GET: api/ProdutosApi</span>
    [<span class="type">HttpGet</span>]
    <span class="keyword">public</span> ActionResult&lt;IEnumerable&lt;<span class="type">Produto</span>&gt;&gt; <span class="js-func">GetProdutos</span>()
    {
        <span class="keyword">return</span> _context.Produtos.<span class="js-func">ToList</span>();
    }

    <span class="comment">// GET: api/ProdutosApi/5</span>
    [<span class="type">HttpGet</span>(<span class="js-string">"{id}"</span>)]
    <span class="keyword">public</span> ActionResult&lt;<span class="type">Produto</span>&gt; <span class="js-func">GetProduto</span>(<span class="keyword">int</span> <span class="js-var">id</span>)
    {
        <span class="keyword">var</span> <span class="js-var">produto</span> = _context.Produtos.<span class="js-func">Find</span>(<span class="js-var">id</span>);
        <span class="keyword">if</span> (<span class="js-var">produto</span> == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="js-func">NotFound</span>();
        <span class="keyword">return</span> <span class="js-var">produto</span>;
    }
}</pre>
            </div>
        </div>

        <!-- SLIDE 9: POST, PUT, DELETE -->
        <div class="slide slide-content">
            <div class="slide-header"><h2>POST, PUT e DELETE</h2></div>
            <div class="slide-body">
                <pre style="font-size: 0.85em;">
<span class="comment">// POST: api/ProdutosApi</span>
[<span class="type">HttpPost</span>]
<span class="keyword">public</span> ActionResult&lt;<span class="type">Produto</span>&gt; <span class="js-func">PostProduto</span>(<span class="type">Produto</span> <span class="js-var">produto</span>)
{
    _context.Produtos.<span class="js-func">Add</span>(<span class="js-var">produto</span>);
    _context.<span class="js-func">SaveChanges</span>();
    <span class="keyword">return</span> <span class="js-func">CreatedAtAction</span>(<span class="keyword">nameof</span>(GetProduto), 
        <span class="keyword">new</span> { id = <span class="js-var">produto</span>.Id }, <span class="js-var">produto</span>);
}

<span class="comment">// PUT: api/ProdutosApi/5</span>
[<span class="type">HttpPut</span>(<span class="js-string">"{id}"</span>)]
<span class="keyword">public</span> <span class="type">IActionResult</span> <span class="js-func">PutProduto</span>(<span class="keyword">int</span> <span class="js-var">id</span>, <span class="type">Produto</span> <span class="js-var">produto</span>)
{
    <span class="keyword">if</span> (<span class="js-var">id</span> != <span class="js-var">produto</span>.Id) <span class="keyword">return</span> <span class="js-func">BadRequest</span>();
    _context.<span class="js-func">Update</span>(<span class="js-var">produto</span>);
    _context.<span class="js-func">SaveChanges</span>();
    <span class="keyword">return</span> <span class="js-func">NoContent</span>();
}

<span class="comment">// DELETE: api/ProdutosApi/5</span>
[<span class="type">HttpDelete</span>(<span class="js-string">"{id}"</span>)]
<span class="keyword">public</span> <span class="type">IActionResult</span> <span class="js-func">DeleteProduto</span>(<span class="keyword">int</span> <span class="js-var">id</span>)
{
    <span class="keyword">var</span> <span class="js-var">produto</span> = _context.Produtos.<span class="js-func">Find</span>(<span class="js-var">id</span>);
    <span class="keyword">if</span> (<span class="js-var">produto</span> == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="js-func">NotFound</span>();
    _context.Produtos.<span class="js-func">Remove</span>(<span class="js-var">produto</span>);
    _context.<span class="js-func">SaveChanges</span>();
    <span class="keyword">return</span> <span class="js-func">NoContent</span>();
}</pre>
            </div>
        </div>

        <!-- SLIDE 10: Status Codes -->
        <div class="slide slide-content">
            <div class="slide-header"><h2>Status Codes HTTP</h2></div>
            <div class="slide-body">
                <table>
                    <thead><tr><th>C√≥digo</th><th>Significado</th><th>M√©todo ASP.NET</th></tr></thead>
                    <tbody>
                        <tr><td><strong style="color:#2ecc71;">200</strong></td><td>OK ‚Äî Sucesso</td><td><span class="inline-code">Ok()</span></td></tr>
                        <tr><td><strong style="color:#2ecc71;">201</strong></td><td>Created ‚Äî Recurso criado</td><td><span class="inline-code">CreatedAtAction()</span></td></tr>
                        <tr><td><strong style="color:#3498db;">204</strong></td><td>No Content ‚Äî Sucesso sem corpo</td><td><span class="inline-code">NoContent()</span></td></tr>
                        <tr><td><strong style="color:#f39c12;">400</strong></td><td>Bad Request ‚Äî Dados inv√°lidos</td><td><span class="inline-code">BadRequest()</span></td></tr>
                        <tr><td><strong style="color:#e74c3c;">404</strong></td><td>Not Found ‚Äî N√£o encontrado</td><td><span class="inline-code">NotFound()</span></td></tr>
                        <tr><td><strong style="color:#e74c3c;">500</strong></td><td>Internal Server Error</td><td>Exce√ß√£o n√£o tratada</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- SLIDE 11: Swagger -->
        <div class="slide slide-content">
            <div class="slide-header"><h2>Swagger / OpenAPI</h2></div>
            <div class="slide-body">
                <p>O <strong>Swagger</strong> gera automaticamente uma documenta√ß√£o interativa da sua API, permitindo testar os endpoints diretamente no navegador.</p>
                <pre>
<span class="comment">// Program.cs</span>
builder.Services.<span class="js-func">AddEndpointsApiExplorer</span>();
builder.Services.<span class="js-func">AddSwaggerGen</span>();

<span class="keyword">if</span> (app.Environment.<span class="js-func">IsDevelopment</span>())
{
    app.<span class="js-func">UseSwagger</span>();
    app.<span class="js-func">UseSwaggerUI</span>();
}</pre>
                <div class="concept-cards" style="margin-top: 10px;">
                    <div class="concept-card">
                        <span class="card-icon">üìã</span>
                        <h4>Documenta√ß√£o</h4>
                        <p>Lista todos os endpoints automaticamente</p>
                    </div>
                    <div class="concept-card">
                        <span class="card-icon">üß™</span>
                        <h4>Teste</h4>
                        <p>Permite testar cada endpoint no navegador</p>
                    </div>
                    <div class="concept-card">
                        <span class="card-icon">ü§ù</span>
                        <h4>Colabora√ß√£o</h4>
                        <p>Front-end sabe exatamente como chamar a API</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- SLIDE 12: Caso de Uso Real -->
        <div class="slide slide-content">
            <div class="slide-header"><h2>Caso de Uso Real</h2></div>
            <div class="slide-body">
                <div class="real-world">
                    <h3>Uber ‚Äî APIs em Tudo</h3>
                    <span class="company-tag">Uber</span>
                    <span class="company-tag">API REST</span>
                    <span class="company-tag">Microservi√ßos</span>
                    <p style="margin-top: 10px;">O app do Uber no seu celular <strong>n√£o acessa o banco de dados diretamente</strong>. Ele consome APIs REST: uma API para localiza√ß√£o, outra para pre√ßos, outra para pagamentos, outra para avalia√ß√µes. Cada funcionalidade √© uma API independente.</p>
                </div>
                <div class="diagram-flow" style="margin-top: 10px; justify-content: center;">
                    <div class="diagram-box" style="min-width: 100px;">
                        <span class="box-label">App iOS</span>
                    </div>
                    <span class="diagram-arrow">‚Üí</span>
                    <div class="diagram-box highlight" style="min-width: 100px;">
                        <span class="box-label">API REST</span>
                    </div>
                    <span class="diagram-arrow">‚Üê</span>
                    <div class="diagram-box" style="min-width: 100px;">
                        <span class="box-label">App Android</span>
                    </div>
                </div>
                <p style="text-align: center; font-size: 0.85em; color: #888; margin-top: 5px;">A mesma API serve m√∫ltiplos clientes: iOS, Android, Web</p>
            </div>
        </div>

        <!-- SLIDE 13: Exerc√≠cio Guiado -->
        <div class="slide slide-content">
            <div class="slide-header"><h2>Exerc√≠cio Guiado</h2></div>
            <div class="slide-body">
                <div class="guided-exercise">
                    <h3>API REST de Produtos com Swagger</h3>
                    <div class="timebox">40 minutos</div>
                    <ol class="guided-steps">
                        <li>Crie o arquivo <span class="inline-code">ProdutosApiController.cs</span> com <span class="inline-code">[ApiController]</span></li>
                        <li>Implemente o <strong>GET</strong> (listar todos e buscar por ID)</li>
                        <li>Implemente o <strong>POST</strong> (criar produto)</li>
                        <li>Implemente o <strong>PUT</strong> (atualizar produto)</li>
                        <li>Implemente o <strong>DELETE</strong> (excluir produto)</li>
                        <li>Configure o Swagger no <span class="inline-code">Program.cs</span></li>
                        <li>Acesse <span class="inline-code">/swagger</span> e teste cada endpoint</li>
                        <li>Cadastre 3 produtos via Swagger, edite 1 e exclua 1</li>
                    </ol>
                </div>
            </div>
        </div>

        <!-- SLIDE 14: Prepara√ß√£o -->
        <div class="slide slide-content">
            <div class="slide-header"><h2>Prepara√ß√£o para a Pr√≥xima Aula</h2></div>
            <div class="slide-body" style="justify-content: center;">
                <div class="box-preclass">
                    <h3>Atividade Pr√©-Aula (Obrigat√≥ria)</h3>
                    <p>Para a <strong>Aula 17 ‚Äî Relacionamentos e EF Core Avan√ßado</strong>:</p>
                    <ol style="margin-top: 10px;">
                        <li>Pesquise sobre <strong>relacionamentos</strong> em banco de dados (1:N, N:N)</li>
                        <li>Leia sobre <strong>chaves estrangeiras</strong> (Foreign Keys)</li>
                        <li>Pesquise o que √© <strong>LINQ</strong> no C#</li>
                        <li>Pense: como o Mercado Livre relaciona um produto ao seu vendedor?</li>
                    </ol>
                    <p style="margin-top: 15px;"><strong>Tempo estimado:</strong> 25 minutos</p>
                </div>
            </div>
        </div>

        <!-- SLIDE 15: Encerramento -->
        <div class="slide slide-cover">
            <h1>Obrigado!</h1>
            <h2>D√∫vidas?</h2>
            <p>jose.romualdo@uni9.pro.br</p>
            <p style="margin-top: 30px; font-size: 0.9em; color: rgba(255,255,255,0.5);">Aula 16 ‚Äî API REST com ASP.NET Core</p>
        </div>

    </div>
    <script src="js/slides.js"></script>
</body>
</html>
