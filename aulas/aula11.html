<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aula 11 - Entity Framework Core e MySQL | Desenvolvimento Web - UNINOVE</title>
    <link rel="stylesheet" href="css/slides.css">
</head>
<body>
    <div class="presentation">

        <!-- SLIDE 1: Capa -->
        <div class="slide slide-cover active">
            <h1>Desenvolvimento Web</h1>
            <h2>Aula 11 ‚Äî Entity Framework Core e MySQL</h2>
            <p>ORM, DbContext, DbSet e Migrations</p>
            <p style="margin-top: 30px; font-size: 0.9em; color: rgba(255,255,255,0.5);">2026.1 ‚Äî 120 minutos</p>
        </div>

        <!-- SLIDE 2: Recapitula√ß√£o -->
        <div class="slide slide-content">
            <div class="slide-header"><h2>Recapitula√ß√£o ‚Äî Aula 10</h2></div>
            <div class="slide-body">
                <div class="recap-container">
                    <h3>O que vimos na aula passada</h3>
                    <ul class="recap-items">
                        <li class="recap-item"><strong>Model:</strong> Classe C# que representa dados ‚Äî substitui ViewBag</li>
                        <li class="recap-item"><strong>[HttpGet]/[HttpPost]:</strong> GET exibe formul√°rio, POST recebe dados</li>
                        <li class="recap-item"><strong>Model Binding:</strong> ASP.NET preenche o objeto automaticamente</li>
                        <li class="recap-item"><strong>Data Annotations:</strong> [Required], [EmailAddress], [StringLength] para valida√ß√£o</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- SLIDE 3: Mini Quiz (in√≠cio ‚Äî refor√ßo) -->
        <div class="slide slide-content">
            <div class="slide-header"><h2>Mini Quiz ‚Äî Revis√£o</h2></div>
            <div class="slide-body" style="justify-content: center;">
                <div class="quiz-container" data-answer="c">
                    <h3>Vamos relembrar!</h3>
                    <p class="quiz-question">Qual propriedade do Controller verifica se <strong>todas as valida√ß√µes</strong> do Model passaram?</p>
                    <ul class="quiz-options">
                        <li><button class="quiz-option" data-option="a">a) Model.IsValid</button></li>
                        <li><button class="quiz-option" data-option="b">b) ViewBag.IsValid</button></li>
                        <li><button class="quiz-option" data-option="c">c) ModelState.IsValid</button></li>
                        <li><button class="quiz-option" data-option="d">d) Request.IsValid</button></li>
                    </ul>
                    <div class="quiz-feedback">A resposta correta √© <strong>(c)</strong>. <span class="inline-code">ModelState.IsValid</span> retorna true somente se todas as Data Annotations forem satisfeitas.</div>
                </div>
            </div>
        </div>

        <!-- SLIDE 4: Agenda -->
        <div class="slide slide-content">
            <div class="slide-header"><h2>Agenda</h2></div>
            <div class="slide-body">
                <ul class="agenda-list">
                    <li>O que √© um ORM?</li>
                    <li>Entity Framework Core ‚Äî Vis√£o geral</li>
                    <li>Instala√ß√£o dos pacotes NuGet</li>
                    <li>Configurando a conex√£o com MySQL</li>
                    <li>DbContext e DbSet</li>
                    <li>Migrations ‚Äî Criando o banco automaticamente</li>
                    <li>Caso de Uso Real: iFood</li>
                    <li>Exerc√≠cio Guiado: Conectando ao MySQL</li>
                </ul>
            </div>
        </div>

        <!-- SLIDE 5: O que √© um ORM -->
        <div class="slide slide-content">
            <div class="slide-header"><h2>O que √© um ORM?</h2></div>
            <div class="slide-body">
                <p><strong>ORM</strong> (Object-Relational Mapping) √© uma t√©cnica que mapeia objetos C# para tabelas do banco de dados. Voc√™ trabalha com <strong>objetos</strong>, n√£o com SQL.</p>
                <div class="analogy-box" style="margin-top: 15px;">
                    <span class="analogy-icon">üîÑ</span>
                    <div class="analogy-text">
                        <h4>Analogia: Tradutor</h4>
                        <p>O ORM √© como um tradutor entre duas l√≠nguas: C# e SQL. Voc√™ fala em C# e ele traduz para SQL automaticamente!</p>
                    </div>
                </div>
                <div class="concept-cards two-cols" style="margin-top: 15px;">
                    <div class="concept-card">
                        <h4>Sem ORM (SQL manual)</h4>
                        <pre style="font-size: 0.8em; margin: 5px 0;">SELECT * FROM Produtos
WHERE Preco > 100
ORDER BY Nome;</pre>
                    </div>
                    <div class="concept-card">
                        <h4>Com ORM (C#)</h4>
                        <pre style="font-size: 0.8em; margin: 5px 0;">_db.Produtos
  .Where(p => p.Preco > 100)
  .OrderBy(p => p.Nome);</pre>
                    </div>
                </div>
            </div>
        </div>

        <!-- SLIDE 6: EF Core -->
        <div class="slide slide-content">
            <div class="slide-header"><h2>Entity Framework Core</h2></div>
            <div class="slide-body">
                <p>O <strong>Entity Framework Core</strong> (EF Core) √© o ORM oficial da Microsoft para .NET. Ele suporta v√°rios bancos de dados.</p>
                <div class="diagram-flow" style="margin-top: 15px; justify-content: center;">
                    <div class="diagram-box" style="min-width: 130px;">
                        <span class="box-label">Model (C#)</span>
                        <span class="box-desc">Classe Produto</span>
                    </div>
                    <span class="diagram-arrow">‚Üí</span>
                    <div class="diagram-box highlight" style="min-width: 130px;">
                        <span class="box-label">EF Core</span>
                        <span class="box-desc">ORM / Tradutor</span>
                    </div>
                    <span class="diagram-arrow">‚Üí</span>
                    <div class="diagram-box highlight-coral" style="min-width: 130px;">
                        <span class="box-label">MySQL</span>
                        <span class="box-desc">Tabela produtos</span>
                    </div>
                </div>
                <table style="margin-top: 15px;">
                    <thead><tr><th>C# (Model)</th><th>MySQL (Tabela)</th></tr></thead>
                    <tbody>
                        <tr><td>Classe <span class="inline-code">Produto</span></td><td>Tabela <span class="inline-code">produtos</span></td></tr>
                        <tr><td>Propriedade <span class="inline-code">Nome</span></td><td>Coluna <span class="inline-code">nome</span></td></tr>
                        <tr><td>Propriedade <span class="inline-code">int Id</span></td><td>Coluna <span class="inline-code">id INT PRIMARY KEY</span></td></tr>
                        <tr><td>Objeto <span class="inline-code">new Produto()</span></td><td>Linha (registro)</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- SLIDE 7: Instala√ß√£o -->
        <div class="slide slide-content">
            <div class="slide-header"><h2>Instala√ß√£o dos Pacotes NuGet</h2></div>
            <div class="slide-body">
                <p>No terminal, dentro da pasta do projeto:</p>
                <pre>
<span class="comment"># Pacote principal do EF Core</span>
dotnet add package Microsoft.EntityFrameworkCore

<span class="comment"># Driver para MySQL (Pomelo)</span>
dotnet add package Pomelo.EntityFrameworkCore.MySql

<span class="comment"># Ferramentas para Migrations</span>
dotnet add package Microsoft.EntityFrameworkCore.Design

<span class="comment"># Instalar a ferramenta CLI do EF (uma vez)</span>
dotnet tool install --global dotnet-ef</pre>
                <div class="box-warning" style="margin-top: 10px;">
                    <p>Usamos o <strong>Pomelo</strong> como driver MySQL por ser o mais popular e bem mantido pela comunidade.</p>
                </div>
            </div>
        </div>

        <!-- SLIDE 8: DbContext -->
        <div class="slide slide-content">
            <div class="slide-header"><h2>DbContext ‚Äî O Cora√ß√£o do EF Core</h2></div>
            <div class="slide-body">
                <p>O <strong>DbContext</strong> gerencia a conex√£o com o banco e os mapeamentos. Cada <span class="inline-code">DbSet&lt;T&gt;</span> representa uma tabela.</p>
                <pre>
<span class="comment">// Data/AppDbContext.cs</span>
<span class="keyword">using</span> Microsoft.EntityFrameworkCore;

<span class="keyword">public class</span> <span class="type">AppDbContext</span> : <span class="type">DbContext</span>
{
    <span class="keyword">public</span> <span class="js-func">AppDbContext</span>(
        DbContextOptions&lt;<span class="type">AppDbContext</span>&gt; <span class="js-var">options</span>)
        : <span class="keyword">base</span>(<span class="js-var">options</span>) { }

    <span class="comment">// Cada DbSet = uma tabela no banco</span>
    <span class="keyword">public</span> DbSet&lt;<span class="type">Produto</span>&gt; Produtos { <span class="keyword">get</span>; <span class="keyword">set</span>; }
}</pre>
                <div class="box-info" style="margin-top: 10px;">
                    <p><span class="inline-code">DbSet&lt;Produto&gt; Produtos</span> ‚Üí cria a tabela <strong>Produtos</strong> no MySQL com as colunas correspondentes √†s propriedades da classe.</p>
                </div>
            </div>
        </div>

        <!-- SLIDE 9: Configura√ß√£o -->
        <div class="slide slide-content">
            <div class="slide-header"><h2>Configurando a Conex√£o</h2></div>
            <div class="slide-body">
                <pre>
<span class="comment">// appsettings.json</span>
{
  <span class="js-string">"ConnectionStrings"</span>: {
    <span class="js-string">"DefaultConnection"</span>: 
      <span class="js-string">"Server=localhost;Database=devweb;User=root;Password=123456;"</span>
  }
}

<span class="comment">// Program.cs ‚Äî Registrar o DbContext</span>
<span class="keyword">var</span> <span class="js-var">connectionString</span> = builder.Configuration
    .<span class="js-func">GetConnectionString</span>(<span class="js-string">"DefaultConnection"</span>);

builder.Services.<span class="js-func">AddDbContext</span>&lt;<span class="type">AppDbContext</span>&gt;(<span class="js-var">options</span> =>
    <span class="js-var">options</span>.<span class="js-func">UseMySql</span>(
        <span class="js-var">connectionString</span>,
        ServerVersion.<span class="js-func">AutoDetect</span>(<span class="js-var">connectionString</span>)
    )
);</pre>
            </div>
        </div>

        <!-- SLIDE 10: Migrations -->
        <div class="slide slide-content">
            <div class="slide-header"><h2>Migrations ‚Äî Criando o Banco</h2></div>
            <div class="slide-body">
                <p><strong>Migrations</strong> s√£o como "vers√µes" do banco de dados. O EF Core gera o SQL automaticamente a partir dos seus Models.</p>
                <pre>
<span class="comment"># 1. Criar a primeira migration</span>
dotnet ef migrations add CriarTabelaProdutos

<span class="comment"># 2. Aplicar no banco de dados</span>
dotnet ef database update

<span class="comment"># 3. Se mudar o Model, criar nova migration</span>
dotnet ef migrations add AdicionarCampoCategoria
dotnet ef database update</pre>
                <div class="diagram-flow" style="margin-top: 10px; justify-content: center;">
                    <div class="diagram-box" style="min-width: 120px;">
                        <span class="box-label">Model C#</span>
                        <span class="box-desc">Classe Produto</span>
                    </div>
                    <span class="diagram-arrow">‚Üí</span>
                    <div class="diagram-box highlight" style="min-width: 120px;">
                        <span class="box-label">Migration</span>
                        <span class="box-desc">Arquivo gerado</span>
                    </div>
                    <span class="diagram-arrow">‚Üí</span>
                    <div class="diagram-box" style="min-width: 120px;">
                        <span class="box-label">SQL gerado</span>
                        <span class="box-desc">CREATE TABLE...</span>
                    </div>
                    <span class="diagram-arrow">‚Üí</span>
                    <div class="diagram-box highlight-coral" style="min-width: 120px;">
                        <span class="box-label">MySQL</span>
                        <span class="box-desc">Tabela criada!</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- SLIDE 11: Caso de Uso Real -->
        <div class="slide slide-content">
            <div class="slide-header"><h2>Caso de Uso Real</h2></div>
            <div class="slide-body">
                <div class="real-world">
                    <h3>iFood ‚Äî Cat√°logo de Restaurantes e Pratos</h3>
                    <span class="company-tag">iFood</span>
                    <span class="company-tag">ORM</span>
                    <span class="company-tag">Banco de Dados</span>
                    <p style="margin-top: 10px;">O iFood gerencia milh√µes de restaurantes, pratos e pedidos. Cada entidade √© um <strong>Model</strong> mapeado para tabelas no banco. O ORM permite que os desenvolvedores trabalhem com objetos C# sem escrever SQL manualmente.</p>
                </div>
                <div class="concept-cards" style="margin-top: 10px;">
                    <div class="concept-card">
                        <span class="card-icon">üçî</span>
                        <h4>Restaurante</h4>
                        <p>Nome, Endere√ßo, Nota, Categoria</p>
                    </div>
                    <div class="concept-card">
                        <span class="card-icon">üçï</span>
                        <h4>Prato</h4>
                        <p>Nome, Pre√ßo, Descri√ß√£o, Foto</p>
                    </div>
                    <div class="concept-card">
                        <span class="card-icon">üì¶</span>
                        <h4>Pedido</h4>
                        <p>Itens, Total, Status, Data</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- SLIDE 12: Exerc√≠cio Guiado -->
        <div class="slide slide-content">
            <div class="slide-header"><h2>Exerc√≠cio Guiado</h2></div>
            <div class="slide-body">
                <div class="guided-exercise">
                    <h3>Conectando o Projeto ao MySQL</h3>
                    <div class="timebox">40 minutos</div>
                    <ol class="guided-steps">
                        <li>Instale os pacotes NuGet (EF Core, Pomelo, Design)</li>
                        <li>Instale a ferramenta CLI: <span class="inline-code">dotnet tool install --global dotnet-ef</span></li>
                        <li>Crie o Model <span class="inline-code">Produto.cs</span> com Id, Nome, Descricao, Preco e Estoque</li>
                        <li>Crie a pasta <span class="inline-code">Data/</span> e o arquivo <span class="inline-code">AppDbContext.cs</span></li>
                        <li>Configure o <span class="inline-code">DbSet&lt;Produto&gt;</span></li>
                        <li>Adicione a connection string no <span class="inline-code">appsettings.json</span></li>
                        <li>Registre o DbContext no <span class="inline-code">Program.cs</span></li>
                        <li>Execute: <span class="inline-code">dotnet ef migrations add Inicial</span></li>
                        <li>Execute: <span class="inline-code">dotnet ef database update</span></li>
                        <li>Verifique no MySQL Workbench se a tabela foi criada</li>
                    </ol>
                </div>
            </div>
        </div>

        <!-- SLIDE 13: Exerc√≠cio Guiado 2 -->
        <div class="slide slide-content">
            <div class="slide-header"><h2>Exerc√≠cio Guiado (continua√ß√£o)</h2></div>
            <div class="slide-body">
                <div class="guided-exercise">
                    <h3>Inserindo e Listando Dados</h3>
                    <div class="timebox">20 minutos</div>
                    <ol class="guided-steps">
                        <li>Modifique o <span class="inline-code">ProdutoController</span> para receber o <span class="inline-code">AppDbContext</span> via construtor</li>
                        <li>Na Action POST de Cadastrar, salve o produto: <span class="inline-code">_context.Produtos.Add(produto); _context.SaveChanges();</span></li>
                        <li>Na Action Index, liste todos: <span class="inline-code">var lista = _context.Produtos.ToList();</span></li>
                        <li>Na View Index, exiba os produtos em uma tabela HTML com @foreach</li>
                        <li>Cadastre 3 produtos pelo formul√°rio e verifique a listagem</li>
                    </ol>
                </div>
            </div>
        </div>

        <!-- SLIDE 14: Prepara√ß√£o -->
        <div class="slide slide-content">
            <div class="slide-header"><h2>Prepara√ß√£o para a Pr√≥xima Aula</h2></div>
            <div class="slide-body" style="justify-content: center;">
                <div class="box-preclass">
                    <h3>Atividade Pr√©-Aula (Obrigat√≥ria)</h3>
                    <p>Para a <strong>Aula 12 ‚Äî CRUD Completo com EF Core</strong>:</p>
                    <ol style="margin-top: 10px;">
                        <li>Pesquise o que significa <strong>CRUD</strong> (Create, Read, Update, Delete)</li>
                        <li>Leia sobre os m√©todos <span class="inline-code">Find()</span>, <span class="inline-code">Update()</span> e <span class="inline-code">Remove()</span> do EF Core</li>
                        <li>Pesquise o que √© <span class="inline-code">SaveChanges()</span></li>
                        <li>Certifique-se de que o banco MySQL est√° funcionando</li>
                    </ol>
                    <p style="margin-top: 15px;"><strong>Tempo estimado:</strong> 25 minutos</p>
                </div>
            </div>
        </div>

        <!-- SLIDE 15: Encerramento -->
        <div class="slide slide-cover">
            <h1>Obrigado!</h1>
            <h2>D√∫vidas?</h2>
            <p>jose.romualdo@uni9.pro.br</p>
            <p style="margin-top: 30px; font-size: 0.9em; color: rgba(255,255,255,0.5);">Aula 11 ‚Äî Entity Framework Core e MySQL</p>
        </div>

    </div>
    <script src="js/slides.js"></script>
</body>
</html>
